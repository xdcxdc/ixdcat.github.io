[{"title":"【置顶】欢迎来到本站","date":"2048-10-23T16:00:00.000Z","path":"2048/10/24/top-pinned/","text":"欢迎来到本站目前仍在建设中…与我联系请发邮件至 i@xdc.at关注公众号与打赏请点击下方按钮，谢谢支持~","tags":[]},{"title":"规划年会论文关键词词云分析（2014-2017）","date":"2017-11-26T08:58:00.000Z","path":"2017/11/26/word-cloud-of-keywords-in-anpc-papers/","text":"2017中国城市规划年会已经过去一周了，那么今年规划界在主要关注些什么呢？正好年会提供了《2017中国城市规划年会论文集》的光盘，通过这些论文的关键词分布情况来分析今年的关注点，是一个可行的方法。另外手头也有从2014年起每年的论文集，也能做个逐年的对比了。 分析方法年会论文集里的论文一般都是 PDF 格式，可以用 pdfminer3k 这个第三方 python 库来获取文本内容（少部分 PDF 文件获取文本失败，可能1000多个文件是不同的人用不同的软件转换的，pdfminer3k 对某些类型的支持不是很好），并从中提取出文中列出的关键词。关键词的统计结果采用词云的方式进行可视化。词云使用 WordArt.com 该网站来生成，频率排名前300的关键词使用不同的字体大小显示。 分析结果以下为2014-2017年逐年的关键词词云。 2014年规划年会论文关键词词云 2015年规划年会论文关键词词云 2016年规划年会论文关键词词云 2017年规划年会论文关键词词云 很明显，城市更新是今年关注的一大重点。另外，通过逐年的对比，也可以发现一些有趣的地方。 新型城镇化是2014年的最大热点，但近几年关注度在逐渐下降。 城市更新的热度逐年上涨，并在今年成为最大热点。 新常态昙花一现，潮流来得快去的也快。 公众参与一直是广受关注的一个话题。 GIS一直是规划领域的重要分析工具。 更多等你来发现… 欢迎交流~ （E-mail: i@xdc.at）","tags":[{"name":"规划年会","slug":"规划年会","permalink":"https://i.xdc.at/tags/规划年会/"},{"name":"关键词","slug":"关键词","permalink":"https://i.xdc.at/tags/关键词/"},{"name":"词云","slug":"词云","permalink":"https://i.xdc.at/tags/词云/"}]},{"title":"高德行政区边界获取与整理（shp格式）","date":"2017-11-05T06:28:00.000Z","path":"2017/11/05/amap-district-to-shapefile/","text":"高德地图提供了 行政区域查询 API 来获取区县及以上行政区域的矢量边界，以及街镇及以上行政单元的中心点（非几何中心，一般是政府所在地）。高德拥有甲级导航电子地图测绘资质，在行政边界的准确度上更高。尤其是在国界线问题上，网上很多能找到的矢量文件可能来自于国外，自然在中国国界线上会有出入，甚至不乏一些公开发表的论文上也使用了错误的国界线。 由于行政边界存在动态变化，尤其是在基层行政单元上，镇的区划调整会比较常见。另外也存在一些特殊的行政单元，如神农架林区、中山市等。 中山市的行政区划是市、镇两级建制，是全国五个不设县（区、县级市）级编制之地级市之一（另外四个为广东省东莞市、甘肃省嘉峪关市、海南省三沙市和儋州市） –wikipedia 在县这个级别上并不能做到空间全覆盖。另外API 介绍页面上也明确指出：在区县级别，有28个区县不能返回中心点，在乡镇/街道界别，有9262个乡镇/街道不能返回中心点。 获取过程为了使省、市、县各级的边界图整理结果都能做到空间全覆盖，如果某行政单元没有子单元，那么在下一级的边界图上就仍用该级边界来代替。如在区县边界图上，中山市的位置上用的是市一级的中山市边界。另外，从 API 获取到边界坐标要进行一次纠偏，来与标准的 WGS 1984 坐标系匹配。 整理结果以下是整理好的省、市、县边界图， WGS_1984_Web_Mercator_Auxiliary_Sphere 投影。 中国行政区边界 下载下载链接：高德国界shp文件（20171101）高德省界shp文件（20171101）使用以上shp文件的研究成果（论文等）请注明引用来源，引用格式参考：1谢栋灿. 高德行政区边界获取与整理（shp格式）[EB/OL]. [2017.11.05]. http://i.xdc.at/2017/11/05/amap-district-to-shapefile/. 如需更详细数据（市、县边界面，市、县、街镇点），可发邮件至 i@xdc.at 与我联系。","tags":[{"name":"ArcGIS","slug":"ArcGIS","permalink":"https://i.xdc.at/tags/ArcGIS/"},{"name":"高德","slug":"高德","permalink":"https://i.xdc.at/tags/高德/"},{"name":"行政区","slug":"行政区","permalink":"https://i.xdc.at/tags/行政区/"},{"name":"shapefile","slug":"shapefile","permalink":"https://i.xdc.at/tags/shapefile/"}]},{"title":"不借助插件在ArcMap中添加Google地图图层","date":"2017-10-28T12:40:00.000Z","path":"2017/10/28/add-google-map-to-arcmap/","text":"在 ArcMap 中使用在线地图图层，一般来说，除了借助 ArcBruTile 之类的第三方软件外，可以添加 WMS/WMTS 服务（天地图等提供相关服务，但天地图的卫星图时效性不高）。其实，ArcMap 也是支持瓦片图层（切片的 Internet 图层）的，只是没有提供添加界面。但 ArcGIS Online 却提供这样的功能，同时 ArcGIS Online 上添加的自定义瓦片图层可以下载相应的文件在 ArcMap 内打开。于是就有了这么一个“曲线救国”的方法：在 ArcGIS Online 上添加瓦片图层（如 Google 卫星图 http://mt0.google.com/vt/lyrs=s&amp;x={col}&amp;y={row}&amp;z={level}），然后再到 ArcMap 内打开。我已经导出了 Google 地图几种类型的图层（.lyr）文件，可直接拖到 ArcMap 里打开，下载地址在文末。由于众所周知的原因，你需要自行解决如何成功 Google 服务器的问题。 使用效果经过测试， ArcMap 会同时打开8个连接来向服务器请求瓦片内容，因此只要网速不是太慢，加载速度还是很快的。 ArcMap内添加Google卫星图层 文件下载图层文件下载链接：Google地图与卫星图ArcMap图层.zip里面包含4个图层文件： Google Satellite 卫星图 Google Streets 标准街道地图 Google Hybrid Map 卫星与街道混合图 Google Terrain 地形图 由于 Google 街道地图的中国部分数据源来自国内，因此存在偏移。但卫星图是无偏的。 欢迎交流~ （E-mail: i@xdc.at）","tags":[{"name":"ArcMap","slug":"ArcMap","permalink":"https://i.xdc.at/tags/ArcMap/"},{"name":"ArcGIS","slug":"ArcGIS","permalink":"https://i.xdc.at/tags/ArcGIS/"},{"name":"切片图层","slug":"切片图层","permalink":"https://i.xdc.at/tags/切片图层/"},{"name":"Google","slug":"Google","permalink":"https://i.xdc.at/tags/Google/"}]},{"title":"高德建筑3D轮廓获取尝试","date":"2017-10-03T04:46:00.000Z","path":"2017/10/03/get-3d-buildings-from-amap/","text":"高德开放过获取建筑轮廓的接口，可以获取指定瓦片内的建筑物轮廓（像素坐标形式）以及相应层数。 通过构造爬虫，批量获取一定范围内的建筑物轮廓信息，再经过坐标转换和纠偏，即可得到矢量的建筑物3D轮廓数据，可以在 ArcMap、ArcScene 内显示，也可以导出到 Google Earth 等软件查看。 数据效果 ArcMap内平面显示 ArcScene内三维显示 欢迎交流~ （E-mail: i@xdc.at）","tags":[{"name":"高德","slug":"高德","permalink":"https://i.xdc.at/tags/高德/"},{"name":"建筑轮廓","slug":"建筑轮廓","permalink":"https://i.xdc.at/tags/建筑轮廓/"}]},{"title":"【软件更新】基于高德 API 的交通等时线划分工具 v1.5.0","date":"2017-08-16T13:56:00.000Z","path":"2017/08/16/transportation-contourline-tbx-1.5/","text":"软件初始版本介绍见 基于高德 API 的交通等时线划分工具（xdc交通等时线工具箱）。 此版本主要特性 1. 生成等时线范围可设置为时间范围或空间范围 除了可以设置时间范围（分钟）来作为生成等时线的范围外，还可以输入一个面作为采样点的空间四至边界（与输入时间范围方式二选一）。输入的面必须为 GCS_WGS_1984 坐标系，可通过创建一个新的shapefile或将现有其他坐标系的面转换投影等方法获得。输入的中心点可以在输入的边界面外。 2. 支持多线程获取数据 多线程并发获取采样点交通时间数据，网络环境较好状况下每秒可完成数十次请求。 3. 交通方式加入骑行 现支持获取驾车、步行、公交、骑行四种交通方式的等时线。 4. 自动选择合适的投影坐标系 如果投影坐标系一项输入留空，则会自动选择条带最接近的UTM坐标系。 v1.5.0版输入界面 如果帮助栏未显示，请点击窗口下方的“显示帮助”按钮打开右侧帮助栏，以便在点击各项输入框时查看对应的帮助信息 更新历史v1.3.1 支持自定义采样空间边界v1.3.3 更新公交方式数据接口v1.4.1 测试加入多线程支持v1.5.0 添加骑行交通方式支持；支持自动选择最接近的投影坐标系 下载地址仍在 原软件介绍页面。","tags":[{"name":"ArcGIS","slug":"ArcGIS","permalink":"https://i.xdc.at/tags/ArcGIS/"},{"name":"高德","slug":"高德","permalink":"https://i.xdc.at/tags/高德/"},{"name":"tbx","slug":"tbx","permalink":"https://i.xdc.at/tags/tbx/"},{"name":"工具箱","slug":"工具箱","permalink":"https://i.xdc.at/tags/工具箱/"},{"name":"交通等时线","slug":"交通等时线","permalink":"https://i.xdc.at/tags/交通等时线/"},{"name":"骑行","slug":"骑行","permalink":"https://i.xdc.at/tags/骑行/"}]},{"title":"给右键菜单添加“在此处打开 Anaconda 命令行”","date":"2017-08-13T03:26:08.000Z","path":"2017/08/13/add-anaconda-prompt-to-context-menu-of-explorer/","text":"问题描述出于种种需要，系统内可能安装了多了python运行环境，如： python.org 上下载的 Python 2.7 32bit（用于使用某些只支持32位的第三方库） ArcGIS 所用的 Python 2.7 32bit（以及 Python 2.7 64bit，如果安装了64位后台地理处理） Anaconda with Python 2 和/或 Anaconda with Python 3 WinPython 等其他 Python 发行版 而默认情况下，即使系统变量PATH内填写了多了python.exe所在的路径，cmd内执行python的时候也只会执行所找到的第一个。另外，为了避免与ArcGIS冲突、影响ArcGIS内Python环境的使用，在安装Anaconda的时候取消勾选 Add Anaconda to my PATH environment varialbe 和 Register Anaconda as my default Python 2.7。这样的话，运行Anaconda命令行就只能从开始菜单打开相应的快捷方式了，而不能直接在文件夹内Shift+鼠标右键，打开命令行即用了。 Anaconda 解决方案通过添加相应的注册表项，可以在右键菜单内添加一项“在此处打开 Anaconda 命令行”Anaconda2 Prompt Here。具体步骤如下（假设Anaconda安装在 D:\\Anaconda2\\ ）：1. 在注册表 HKEY_CLASSES_ROOT\\Directory\\Background\\shell\\ 下新建一项 Anaconda2，默认值为 Anaconda2 Prompt Here (此值为菜单项显示名称，可以自行修改)。在Anaconda2下新建字符串值Icon，数据为D:\\Anaconda2\\Menu\\Iconleak-Atrous-Console.ico。如果想要在同时按下Shift和鼠标右键才出现菜单项，而不是直接鼠标右键就出现，就在Anaconda2下新建字符串值Extended，数据留空。2. 在Anaconda2下新建一项command，默认值填入cmd.exe /s /k &quot;title Anaconda2&quot; &amp;&amp; D:\\Anaconda2\\Scripts\\activate.bat D:\\Anaconda2。 除了手动打开regedit.exe注册表编辑器执行以上操作的方法外，也可以将以下代码用记事本保存到.reg后缀的文件中，然后双击打开reg文件即可自动导入相应注册表内容。注意根据Anaconda的实际安装路径进行修改。 12345678Windows Registry Editor Version 5.00[HKEY_CLASSES_ROOT\\Directory\\Background\\shell\\Anaconda2]@=&quot;Anaconda2 Prompt Here&quot;&quot;Icon&quot;=&quot;D:\\\\Anaconda2\\\\Menu\\\\Iconleak-Atrous-Console.ico&quot;[HKEY_CLASSES_ROOT\\Directory\\Background\\shell\\Anaconda2\\command]@=&quot;cmd.exe /s /k \\&quot;title Anaconda2\\&quot; &amp;&amp; D:\\\\Anaconda2\\\\Scripts\\\\activate.bat D:\\\\Anaconda2&quot; 使用效果在任意文件夹内空白处点击鼠标右键，效果如下： 文件夹右键菜单 点击Anaconda2 Prompt Here后，在打开的窗口内执行python，打开的就是Anaconda的python解释器了。 Anaconda命令提示行窗口 而如果此时在文件夹右键菜单内打开系统的命令行并执行python，则打开的是在系统变量PATH内所指定的python解释器，与新添加的Anaconda命令行两者独立。","tags":[{"name":"注册表","slug":"注册表","permalink":"https://i.xdc.at/tags/注册表/"},{"name":"Anaconda","slug":"Anaconda","permalink":"https://i.xdc.at/tags/Anaconda/"},{"name":"Python","slug":"Python","permalink":"https://i.xdc.at/tags/Python/"}]},{"title":"【软件工具】地址批量定位工具","date":"2017-08-06T15:07:00.000Z","path":"2017/08/06/bulk-address-locator/","text":"软件介绍该工具利用高德的地理编码接口，将输入的地址转换为经纬度坐标，并可生成shp文件。v1.1.0测试版支持多线程，可显著提高数据获取速度。该工具以 ArcGIS 工具箱的形式提供，使用方法可参考 在 ArcGIS 内使用 tbx 工具箱 。 使用说明输入界面 输入界面 如果帮助栏未显示，请点击窗口下方的“显示帮助”按钮打开右侧帮助栏，以便在点击各项输入框时查看对应的帮助信息 输入字段说明1. 输入txt文件的位置 输入文件应为一个txt文档，每行一个地址，不必包含表头。txt文档的编码为gb2312,gbk,utf-8均可。输入地名可以是地点名（如上海市人民广场），也可以是包含路名的地址（如上海市四平路1239号）。 2. 位置点所在城市（如：上海市，如果txt内地址已包含城市名该项可留空） (可选) 如果txt文档内的地址不包含城市名称，请在此处输入城市名称。 3. 输出使用高德坐标系，而不是WGS84坐标系？ 如果需要和带偏移的高德地图进行匹配，请将该选项设置为Yes。否则将默认纠偏为WGS84坐标系。 4. 输出txt文件位置（与输出shp文件至少二选一） (可选) 将结果输出为txt文档。 5. 输出shp文件位置（与输出txt文件至少二选一） (可选) 将结果输出为shapefile。 6. 激活码 (可选) 未激活版本每次最多输出10个点。获得授权后第一次使用工具需填写激活码，当运行后看到“激活码写入文件成功”的提示，以后使用就无需填写。请妥善保存您的激活码。城市数据派会员获取激活码请联系数据派管理员。 非数据派会员请发邮件至 i@xdc.at 输出结果输出结果包含以下字段：input_name 输入地址名，lng经度，lat纬度（默认纠偏为标准的WGS 1984坐标），address格式化的地址字符串，province省份，city城市名，district区县名。如果输入的某行是不存在的地址，则txt内仍会按顺序输出一行（字段值为0或空），以方便与原输入表对齐。但shp文件内只会输出能够定位的点。 获取激活码软件试用运行时会在运行信息中显示本机的机器码，城市数据派会员获取激活码请联系数据派管理员。非数据派会员请将机器码发送至邮箱 i@xdc.at 以获取激活码。 下载地址xdc地址批量定位v1.1.0.tbx（测试版）","tags":[{"name":"ArcGIS","slug":"ArcGIS","permalink":"https://i.xdc.at/tags/ArcGIS/"},{"name":"高德","slug":"高德","permalink":"https://i.xdc.at/tags/高德/"},{"name":"tbx","slug":"tbx","permalink":"https://i.xdc.at/tags/tbx/"},{"name":"工具箱","slug":"工具箱","permalink":"https://i.xdc.at/tags/工具箱/"},{"name":"地理编码","slug":"地理编码","permalink":"https://i.xdc.at/tags/地理编码/"}]},{"title":"利用mapbox进行地图在线可视化","date":"2017-08-05T12:48:00.000Z","path":"2017/08/05/map-by-mapbox/","text":"mapbox提供了可对地图样式进行自定义编辑，并且可以上传自己的地理数据作为叠加图层。 此处为几个测试成果： 全国公交线路 全国公交线路在线可视化 全国公交线路在线可视化 点此查看 全国县至上海路线 全国县至上海路线可视化 全国县至上海路线在线可视化 点此查看 如有其它成果，将更新在以下页面：地图在线可视化 | 谢栋灿","tags":[{"name":"mapbox","slug":"mapbox","permalink":"https://i.xdc.at/tags/mapbox/"}]},{"title":"【软件工具】高德导航路径与时耗获取工具","date":"2017-07-29T12:32:33.000Z","path":"2017/07/29/amap-routes-tool/","text":"软件介绍该工具利用高德地图的路线规划API获取OD点之间的交通导航线路与时耗，并输出csv表格和shapefile。v1.1.0版本支持多线程，可显著提高数据获取速度。该工具以 ArcGIS 工具箱的形式提供，使用方法可参考 在 ArcGIS 内使用 tbx 工具箱 。 使用说明输入界面 输入界面 如果帮助栏未显示，请点击窗口下方的“显示帮助”按钮打开右侧帮助栏，以便在点击各项输入框时查看对应的帮助信息 输入字段说明1. 输入交通OD的csv或txt表 输入的表格应如以下结构：ItemID,O_lng,O_lat,D_lng,D_lat其中ItemID为该条OD的唯一标识ID，数字或字母均可（同一表格内不要混用数字标识和字母标识，以免ArcGIS在识别字段类型时出错），可用于输出结果表与输入表的关联。O_lng,O_lat,D_lng,D_lat分别为起点的经度、维度以及终点的经度、纬度。输入的csv表可用Excel另存为csv文件得到。输入表是否包含表头均可。 输入表格示例 2. 交通方式 可选择三种交通方式：drive：驾车bus；公共交通walk：步行bike：骑行（v1.2.0版本开始支持） 3. 使用带偏移的高德坐标系，而不是标准的WGS84坐标系？ 如果输入的坐标是带偏移的高德坐标（GCJ-02），请将该选项设置为Yes。否则将默认为无偏的WGS84坐标系。 4. 是否仅输出多条推荐线路中的第一条 输出属性表中包含out_order字段，为推荐线路的序号。如果该项设置为Yes，则仅输出推荐线路的第一条，即out_order=1的记录。 5. 输出csv表位置 选择输出结果csv表格的位置。 6. 输出交通线路Shapefile位置 (可选) 选择输出交通线路shapefile文件的位置。 7. 激活码（试用可留空） (可选) 软件试用运行时会在运行信息中显示本机的机器码，请将机器码发送至邮箱 i@xdc.at 以获取激活码。未激活版本每次最多输出10条结果。获得授权后第一次使用工具需填写激活码，当运行后看到“激活码写入文件成功”的提示，以后使用就无需填写。请妥善保存您的激活码。 输出结果示例输出表格如下： 输出表格 其中，FID2与输出shp文件（如有）的FID相匹配。如果选择了不只输出多条推荐线路中的第一条，则同一ItemID可能会有多条输出结果，以out_order排序。输出 distance 和 duration 的单位分别为米和秒。 输出shapefile如下： 输出shapefile 使用案例从全国县级政府所在地至上海市人民广场的路线汇总 全国县至上海路线 路线细节可查看 全国县至上海路线在线可视化 获取激活码软件试用运行时会在运行信息中显示本机的机器码，请将机器码发送至邮箱 i@xdc.at 以获取激活码。 常见问题1. 路径获取到一定条数后报错 ArcMap是32位程序，而32位程序在Windows下可使用的内存是受限的，因此当获取到的路径折点总数达到一定量，导致arcmap.exe占用内存过大时，就会运行出错。根据OD点间距离的情况，单次可获取的路径线路条数在几千到几万不等。如果不需要路径线路，可把输出shapefile留空，即可避免线路折点数据挤占内存导致运行出错。如果确需要输出shapefile，则建议将输入表格拆分，一次输入适当行数的表格。（考虑到shapefile文件本身容量与性能也有限，建议单次运行控制数量） 下载地址xdc交通线路与时耗抓取v1.1.0.tbxxdc交通线路与时耗抓取v1.2.0.tbx（加入骑行方式）","tags":[{"name":"ArcGIS","slug":"ArcGIS","permalink":"https://i.xdc.at/tags/ArcGIS/"},{"name":"高德","slug":"高德","permalink":"https://i.xdc.at/tags/高德/"},{"name":"路径规划","slug":"路径规划","permalink":"https://i.xdc.at/tags/路径规划/"},{"name":"tbx","slug":"tbx","permalink":"https://i.xdc.at/tags/tbx/"},{"name":"工具箱","slug":"工具箱","permalink":"https://i.xdc.at/tags/工具箱/"}]},{"title":"【数据分析】沙县小吃与兰州拉面之争","date":"2017-06-27T03:53:00.000Z","path":"2017/06/27/shaxian-vs-lanzhou/","text":"兰州拉面和沙县小吃，哪个是中国最火的餐饮？ - 知乎为什么兰州拉面旁边必定有一家沙县小吃？ - 知乎以下分析主要是对上面两个知乎问题的回答，所使用的数据来自 全国POI数据2017年6月更新。 沙县小吃与兰州拉面火热程度对比以当前2017年上半年的情况来看，还是沙县小吃更胜一筹。 通过在全国POI数据中进行检索，名字符合*沙县*小吃*、 *兰州*拉面*/*兰州*牛肉面*的餐饮类店铺分别有5.73万、5.15万。而以上两家的竞争者黄焖鸡米饭以*黄焖鸡*米饭*检索共有4.32万。 但以上三者都比不上麻辣烫，*麻辣烫*的检索结果达到了11.08万之多。 以下是四类店铺在全国的分布情况（点击查看大图效果更佳）。 1. 沙县小吃： 2. 兰州拉面/兰州牛肉面 3. 黄焖鸡米饭 4. 麻辣烫 对比来看，前三者中虽然沙县小吃数量最多，但在分布上不够广泛，并没有普及到乡镇级别。对比之下，兰州拉面/兰州牛肉面、黄焖鸡米饭则做到了从大城市到小乡镇的普及，从图中看，冀豫鲁徽苏一带分布密密麻麻。其中，兰州拉面/牛肉面的分布重心比黄焖鸡米饭略偏南。 而麻辣烫的分布不必言则更为广泛，尤其是东北一带终于在图上亮起来了。 沙县小吃与兰州拉面相邻关系分析兰州拉面旁边一定会有沙县小吃吗？这里我用全国POI数据来验证一下。 通过检索，兰州拉面店铺在全国共有4.56万家，沙县小吃店铺共有5.73万家。 以下是两者在全国的分布图（点击放大查看效果更佳）。 1. 兰州拉面 2. 沙县小吃 可以看到，沙县小吃虽然数量上更多，但却没有兰州拉面那种从一线城市到小乡镇的普及性，尤其是在冀鲁豫一带差异非常明显。 下面对两者之间的临近情况进行分析，分别计算每家店铺离自己最近的对家的距离。结果显示，3.23万家兰州拉面附近1000m内有沙县小吃，占比约70.7%。4.90万家沙县小吃附近1000m内有兰州拉面，占比约85.4%。 以下是附近1000m内有对家的店铺分布图（点击放大查看效果更佳）。其中兰州拉面为绿色点，沙县小吃为红色点，两者叠加显示则为黄色，下同。 只有以上地区才有兰州拉面旁边有沙县小吃，沙县小吃旁边有兰州拉面的现象出现，从分布上看已经覆盖全国很大范围了（距离取1000m其实挺大的了）。但是仍有约15%的沙县小吃旁没有兰州拉面，以及约30%的兰州拉面旁边没有沙县小吃。 以下是孤立（附近1000m内无对家）的店铺分布图（点击放大查看效果更佳）。 1. 孤立的兰州拉面 2. 孤立的沙县小吃 3. 孤立的兰州拉面与孤立的沙县小吃叠加 从图上来看，有大量孤立的兰州拉面存在于冀鲁豫的基层乡镇，而沙县小吃的基层普及程度则差了不少，这也是兰州拉面孤立比例更高的原因之一。另外，两者的分布存在明显的南北差异。四川、湖北、河南、山东及以北地区以兰州拉面的孤立分布为主，而重庆、湖南、江西、浙江及以南则以沙县小吃的孤立分布为主。安徽、江苏则存在着省内的南北差异。 最后来个粗略的总结： 首先，题目中提到的“兰州拉面旁边有沙县小吃”在较多地方还是成立的。 至于两者相邻的原因很简单，因为两者都有很高的普及性，并且价格较为相近，存在一定的竞争关系，产生集聚现象很正常。 孤立分布上，一方面兰州拉面做到了更加基层更加广泛的普及，而沙县小吃则欠缺一些。另外，南北方饮食差异，导致两者在不同地区的受欢迎程度不一样，必然会导致有其中一家而没有另外一家的情况。","tags":[{"name":"POI","slug":"POI","permalink":"https://i.xdc.at/tags/POI/"},{"name":"数据分析","slug":"数据分析","permalink":"https://i.xdc.at/tags/数据分析/"}]},{"title":"全国POI数据2017年6月更新","date":"2017-06-23T02:14:00.000Z","path":"2017/06/23/poi-data-update-201706/","text":"主要更新内容本次 POI 数据在 2017年2月 的基础上，主要更新内容如下： 新增条目 690万+条 删除自2017年2月到现在没再出现的条目 385万+条 详情信息更新 共945万+条，其中 名称更新 135万+条 坐标更新 385万+条 地址字段更新 430万+条 类型信息更新 120万+条 经过此次更新，整理后 POI 数据条目总数达到了 6180万+ 。 各省份 与 TOP 30 城市的 POI 数量 省份 数量 城市 数量 广东省 690万+ 上海市 195万+ 江苏省 515万+ 北京市 170万+ 浙江省 435万+ 广州市 135万+ 山东省 420万+ 成都市 125万+ 河南省 335万+ 深圳市 120万+ 四川省 320万+ 重庆市 115万+ 河北省 260万+ 苏州市 105万+ 湖北省 230万+ 杭州市 95万+ 湖南省 220万+ 东莞市 90万+ 安徽省 210万+ 武汉市 80万+ 上海市 195万+ 天津市 75万+ 辽宁省 195万+ 佛山市 65万+ 福建省 190万+ 宁波市 65万+ 北京市 170万+ 西安市 65万+ 广西壮族自治区 165万+ 青岛市 60万+ 陕西省 160万+ 郑州市 60万+ 江西省 155万+ 南京市 60万+ 云南省 150万+ 无锡市 60万+ 山西省 130万+ 长沙市 60万+ 黑龙江省 125万+ 温州市 55万+ 重庆市 115万+ 沈阳市 50万+ 内蒙古自治区 105万+ 昆明市 45万+ 贵州省 100万+ 石家庄市 45万+ 吉林省 100万+ 金华市 45万+ 甘肃省 80万+ 合肥市 45万+ 天津市 75万+ 哈尔滨市 40万+ 新疆维吾尔自治区 70万+ 泉州市 40万+ 台湾省 50万+ 常州市 40万+ 宁夏回族自治区 35万+ 济南市 40万+ 海南省 30万+ 大连市 40万+ 香港特别行政区 30万+ 青海省 20万+ 西藏自治区 15万+ 澳门特别行政区 5万以下 数据字段信息 数据字段信息 样例下载点此下载样例文件(shp格式) 如需了解更多，可发邮件至 i@xdc.at 与我联系。","tags":[{"name":"开放数据","slug":"开放数据","permalink":"https://i.xdc.at/tags/开放数据/"},{"name":"数据介绍","slug":"数据介绍","permalink":"https://i.xdc.at/tags/数据介绍/"},{"name":"POI","slug":"POI","permalink":"https://i.xdc.at/tags/POI/"}]},{"title":"【软件更新】基于高德 API 的交通等时线划分工具 v1.3.1","date":"2017-05-19T05:54:00.000Z","path":"2017/05/19/transportation-contourline-tbx-1.3.1/","text":"软件介绍见 基于高德 API 的交通等时线划分工具 。 本测试版主要增加功能为可以输入一个面作为采样点的空间四至边界（与输入时间范围方式二选一）。输入的面必须为 GCS_WGS_1984 坐标系，可通过创建一个新的shapefile等方法获得。输入的中心点不一定要在输入的边界面内。 新版输入界面 更新v1.3.1 支持自定义采样空间边界v1.3.3 更新公交方式数据接口v1.4.1 测试加入多线程支持 下载地址仍在 原软件介绍页面。","tags":[{"name":"ArcGIS","slug":"ArcGIS","permalink":"https://i.xdc.at/tags/ArcGIS/"},{"name":"高德","slug":"高德","permalink":"https://i.xdc.at/tags/高德/"},{"name":"tbx","slug":"tbx","permalink":"https://i.xdc.at/tags/tbx/"},{"name":"工具箱","slug":"工具箱","permalink":"https://i.xdc.at/tags/工具箱/"},{"name":"交通等时线","slug":"交通等时线","permalink":"https://i.xdc.at/tags/交通等时线/"}]},{"title":"AOI（兴趣区）数据获取尝试","date":"2017-04-19T12:04:25.000Z","path":"2017/04/19/aoi-data/","text":"AOI（Area of Interest），区别于POI（Point of Interest），一般指小区、公园等的边界信息。 高德地图 中，尤其是在一线城市，点击小区名称，就可显示小区边界。通过构造爬虫，即可获取一定范围内的AOI数据。以下是部分区域的抓取结果。一般中心城区的完整性较好，而郊区数据缺失较多。 杨浦区局部 上海外环线内 北京六环内 广州局部 欢迎交流~ （E-mail: i@xdc.at）","tags":[{"name":"AOI","slug":"AOI","permalink":"https://i.xdc.at/tags/AOI/"},{"name":"开放数据","slug":"开放数据","permalink":"https://i.xdc.at/tags/开放数据/"},{"name":"数据介绍","slug":"数据介绍","permalink":"https://i.xdc.at/tags/数据介绍/"}]},{"title":"【软件工具】天地图POI下载工具","date":"2017-03-02T08:14:12.000Z","path":"2017/03/02/tianditu-poi-tbx/","text":"该工具最早发布于远见网站 http://farsightj.cn/blog/?p=185此版本为与城市数据派的合作版本。 软件介绍该软件工具通过天地图的数据接口，可按地级市级别下载天地图POI数据，支持自定义搜索关键词。由于天地图POI数据在量上较少，因此下载效率比较高。该工具以 ArcGIS 工具箱的形式提供，使用方法可参考 在 ArcGIS 内使用 tbx 工具箱 。 使用说明输入字段说明： 城市名称（地级市名称）： 如果输入的名称与标准行政区名不一致，运行时会有提示，请根据提示进一步修改。 输出txt文件位置 (可选)： 请选择输出txt文件的位置。根据ArcGIS版本的不同，可能需要手动输入.txt后缀名。 输出shp文件位置 (可选)： 请选择输出文件的位置。输出文件为shapefile，请不要放在地理数据库内。txt输出与shp输出至少二选一。 激活码(可选)： 详见 获取激活码 自定义搜索关键词(可选)： 支持自定义搜索关键词，多个关键词之间请使用逗号（全角半角均可）分隔，输入的空格将被忽略。留空则使用默认关键词。 获取激活码未输入激活码时可进行试用，试用过程中运行窗口会显示您的机器码。ArcGIS默认情况下运行窗口较小，您可能需要手动拉大窗口尺寸才能看到全部输出信息。该软件是与 城市数据派 的合作版本，城市数据派会员可联系数据派管理员获取激活码。非数据派会员可发邮件至i@xdc.at与我联系。激活码只需输入一次，后续使用无需再次输入。 常见问题1. 如果遇到输出文件错误，请尝试使用纯字母的文件名。2. 如果连续多次使用均无法正常得到结果，则可能是数据接口变更，请发邮件至i@xdc.at与我联系。 下载天地图POI下载v1.0.4.tbx","tags":[{"name":"ArcGIS","slug":"ArcGIS","permalink":"https://i.xdc.at/tags/ArcGIS/"},{"name":"tbx","slug":"tbx","permalink":"https://i.xdc.at/tags/tbx/"},{"name":"工具箱","slug":"工具箱","permalink":"https://i.xdc.at/tags/工具箱/"},{"name":"POI","slug":"POI","permalink":"https://i.xdc.at/tags/POI/"},{"name":"天地图","slug":"天地图","permalink":"https://i.xdc.at/tags/天地图/"}]},{"title":"全国POI数据2017年2月更新","date":"2017-02-21T04:08:55.000Z","path":"2017/02/21/poi-data-update-201702/","text":"主要更新内容本次 POI 数据在 2016年11月 的基础上，主要更新内容如下： 新增条目 620w条 删除自2016年11月到现在没再出现的条目 380w条 详情信息更新 共1100w+ 条，其中 名称更新 140w条 坐标更新 410w条 地址字段更新 660w条 类型信息更新 120w条 经过此次更新，整理后 POI 数据条目总数达到了 5800w+ 。 更新内容示例 新增的条目 删除的条目 名称更新 类型信息更新 各省份 与 TOP 30 城市的 POI 数量 省份 数量 城市 数量 广东省 650万+ 上海市 180万+ 江苏省 485万+ 北京市 150万+ 浙江省 405万+ 广州市 125万+ 山东省 400万+ 成都市 120万+ 河南省 315万+ 重庆市 110万+ 四川省 310万+ 深圳市 110万+ 河北省 245万+ 苏州市 95万+ 湖北省 220万+ 杭州市 85万+ 湖南省 210万+ 东莞市 85万+ 安徽省 200万+ 武汉市 75万+ 辽宁省 185万+ 天津市 70万+ 上海市 180万+ 佛山市 60万+ 福建省 180万+ 西安市 60万+ 广西壮族自治区 155万+ 宁波市 60万+ 北京市 150万+ 青岛市 60万+ 陕西省 150万+ 南京市 60万+ 江西省 150万+ 无锡市 55万+ 云南省 150万+ 长沙市 55万+ 山西省 125万+ 郑州市 55万+ 黑龙江省 120万+ 温州市 50万+ 重庆市 110万+ 沈阳市 45万+ 内蒙古自治区 105万+ 昆明市 45万+ 贵州省 100万+ 石家庄市 45万+ 吉林省 95万+ 金华市 45万+ 甘肃省 75万+ 合肥市 40万+ 天津市 70万+ 哈尔滨市 40万+ 新疆维吾尔自治区 70万+ 常州市 40万+ 宁夏回族自治区 30万+ 泉州市 40万+ 海南省 30万+ 济南市 40万+ 香港特别行政区 25万+ 南宁市 35万+ 青海省 20万+ 西藏自治区 20万+ 澳门特别行政区 5万以下 台湾省 5万以下 数据字段信息 数据字段信息 样例下载点此下载样例文件(shp格式) 如需了解更多，可发邮件至 i@xdc.at 与我联系。 更新全国POI数据2017年6月更新","tags":[{"name":"开放数据","slug":"开放数据","permalink":"https://i.xdc.at/tags/开放数据/"},{"name":"数据介绍","slug":"数据介绍","permalink":"https://i.xdc.at/tags/数据介绍/"},{"name":"POI","slug":"POI","permalink":"https://i.xdc.at/tags/POI/"}]},{"title":"全国POI数据2016年11月更新","date":"2016-11-20T14:46:40.000Z","path":"2016/11/20/poi-data-update-201611/","text":"上篇对 POI 数据的介绍 中提到，高德的 API 接口返回的并非是完整的 POI 数据，而是存在一定的缺失。 因此为了补漏，距上次抓取两个月后，再次对全国的 POI 数据进行了全范围抓取。统计后发现，补漏与更新的效果还是比较明显的。 数量上，从上次的 4500w+ 扩充到了 5600w+，这个数量已经超过了网络上有人所称的5000w 。并且，对超过 1000w 的数据进行了内容更新，更新包括名称的更改、位置的微调、分类的调整、地址的修改等。 名称更改与位置微调 各省份 与 TOP 30 城市的 POI 数量 省份 数量 城市 数量 广东省 620万+ 上海市 180万+ 江苏省 475万+ 北京市 150万+ 浙江省 385万+ 广州市 120万+ 山东省 380万+ 成都市 115万+ 四川省 305万+ 深圳市 110万+ 河南省 300万+ 重庆市 105万+ 河北省 235万+ 苏州市 100万+ 湖北省 210万+ 杭州市 85万+ 湖南省 205万+ 东莞市 75万+ 安徽省 190万+ 武汉市 70万+ 辽宁省 180万+ 天津市 70万+ 上海市 180万+ 佛山市 60万+ 福建省 170万+ 西安市 60万+ 广西壮族自治区 155万+ 宁波市 60万+ 北京市 150万+ 南京市 55万+ 陕西省 150万+ 郑州市 55万+ 江西省 140万+ 无锡市 55万+ 云南省 140万+ 青岛市 55万+ 山西省 120万+ 长沙市 50万+ 黑龙江省 115万+ 温州市 45万+ 重庆市 105万+ 沈阳市 45万+ 内蒙古自治区 100万+ 石家庄市 45万+ 贵州省 95万+ 金华市 40万+ 吉林省 95万+ 昆明市 40万+ 甘肃省 75万+ 哈尔滨市 40万+ 天津市 70万+ 合肥市 40万+ 新疆维吾尔自治区 70万+ 常州市 35万+ 宁夏回族自治区 30万+ 南宁市 35万+ 海南省 30万+ 济南市 35万+ 香港特别行政区 25万+ 泉州市 35万+ 青海省 20万+ 西藏自治区 20万+ 澳门特别行政区 5万以下 台湾省 5万以下 数据字段信息 数据字段信息 更新全国POI数据2017年2月更新全国POI数据2017年6月更新","tags":[{"name":"开放数据","slug":"开放数据","permalink":"https://i.xdc.at/tags/开放数据/"},{"name":"数据介绍","slug":"数据介绍","permalink":"https://i.xdc.at/tags/数据介绍/"},{"name":"POI","slug":"POI","permalink":"https://i.xdc.at/tags/POI/"}]},{"title":"利用SSH的端口转发实现内网穿透","date":"2016-11-15T15:08:52.000Z","path":"2016/11/15/port-forward-by-ssh/","text":"现状在一个内网内有两台设备：路由器 A 和 B 。 路由器 A 有固定 IP，不受我控制。但在路由器 A 下的一台 Windows 主机 A1 上有一个账户（无权限在 A1 上添加更多新用户）。 A1 的远程桌面端口 3389 在由 A 的管理员在 A 上做了端口映射，因此我可以通过远程桌面协议去访问 A1 。A1 上运行有 SQL Server 。 路由器 B 是一台基于 Linux 的路由器，没有固定 IP ，但受我控制。 B 下有多台 Windows 主机 B1, B2, B3, B4… 需求目前的状况下，B 下同时最多有一台机器连接到 A1 的远程桌面，使用 A1 的数据库服务。希望可以实现 B 下的多台设备（或 B1 上的多个用户 ）同时使用 A1 的数据库服务。B1 上使用 RDPWrap 破解了 Windows 专业版远程桌面同时连接用户数的限制，因此可以多用户同时使用 B1。 解决方案B1 上安装 SQL Server Management Studio 作为前端，连接到 A1 上的 SQL Server 服务后端（TCP 1433 端口）。但因为 A1 在路由器的后面，因此必须进行内网穿透才能从 B1 连接到 A1 的 1433 端口。 对于两个均是在内网里面的设备互相连接，一种方法是借助于公网的服务，如 Teamviewer 的 VPN 功能，可以将两台内网里的设备组件在一个虚拟子网内。但测试发现连接速度十分不理想。 由于路由器 B 受我控制，且是 Linux 的系统，因此就可以拿来灵活利用，这里就需要使用到路由器 B 的 SSH 服务。 首先 A1 和 B1 都通过 SSH 客户端连接到 B。因为 B 没有固定 IP，所以最好使用一个第三方的 DDNS 服务。SSH 客户端我使用的是 Bitvise，这里有一个便携版本。 在 B1 上的 Bitvise 里，添加 C2S 转发，监听 1111（自己修改，避免和本机已有的 1433 端口重复）端口，目标端口为 B 内部的 1433 端口。 在 A1 上的 Bitvise 里，添加 S2C 转发，监听 B 的 1433 的端口，目标为 A1 的 1433 端口。 此时，B1 上发向 1111 端口的请求，就会被转发到 B 的 1433 端口，再转发到 A1 的1433 端口。 在 B1 的 SQL Server Management Studio 内，连接数据库引擎的服务器名称填写127.0.0.1,1111，选择SQL Server 身份验证，填写 A1 上 SQL Server 服务的登录名密码即可连接。 实现以上过程还需要一些前提条件，如 A1 上 SQL Server 服务允许 TCP连接、路由器 B 上的 ssh 服务接受端口转发请求。 顺利的话，通过以上步骤，B1 上的多个用户就可以同时打开 SQL Server Management Studio 连接到 A1 的数据库上去了。","tags":[{"name":"SQL Server","slug":"SQL-Server","permalink":"https://i.xdc.at/tags/SQL-Server/"},{"name":"SSH","slug":"SSH","permalink":"https://i.xdc.at/tags/SSH/"},{"name":"Linux","slug":"Linux","permalink":"https://i.xdc.at/tags/Linux/"},{"name":"内网穿透","slug":"内网穿透","permalink":"https://i.xdc.at/tags/内网穿透/"},{"name":"端口转发","slug":"端口转发","permalink":"https://i.xdc.at/tags/端口转发/"}]},{"title":"在 ArcGIS 内使用 tbx 工具箱","date":"2016-10-31T05:59:33.000Z","path":"2016/10/31/tbx-in-ArcGIS/","text":"tbx 文件是 ArcGIS 的工具箱文件（如下图），因此首先需要安装有 ArcGIS 软件。 tbx文件 tbx 文件在 ArcGIS 内打开一般有两种方法： 1. 直接在目录窗口打开 打开tbx文件 在 ArcMap 软件的目录(Catalog) 窗口定位到该文件，并双击打开。必要时可能需要先添加文件夹连接。 2. 添加到已有工具箱列表 添加tbx文件 在 ArcMap 软件的工具箱(ArcToolbox) 窗口，对窗口内的 ArcToolbox右键单击，再 添加工具箱... ，找到 tbx 文件并选中，点 打开 ，该工具箱即被添加到默认的工具箱列表内，下次使用不必再到原文件夹内去寻找。","tags":[{"name":"ArcGIS","slug":"ArcGIS","permalink":"https://i.xdc.at/tags/ArcGIS/"},{"name":"tbx","slug":"tbx","permalink":"https://i.xdc.at/tags/tbx/"},{"name":"工具箱","slug":"工具箱","permalink":"https://i.xdc.at/tags/工具箱/"}]},{"title":"基于高德 API 的交通等时线划分工具","date":"2016-10-30T05:59:00.000Z","path":"2016/10/30/transportation-contour-line-tbx/","text":"该软件最早于 2016-04-06 发布在城市数据派网站xdc交通等时线工具箱 软件介绍该软件借助高德路径规划的 API 来获取点到点之间的交通时耗数据，然后在 ArcGIS 内生成等时线。该工具的优势在于不必事先获取研究所用的路网并进行烦累的数据预处理。并且借助于高德地图的服务，路网等的质量会比自己做路网数据更好。支持驾车、公共交通、步行三种交通方式。驾车方式可以考虑高架出入口等，公共交通方式包括步行到车站以及下车后步行到目的地的时间。交通时耗数据根据实时路况会有所变动，因此不同时间运行得到的结果会有所不同。该工具以 ArcGIS 工具箱的形式提供，使用方法可参考 在 ArcGIS 内使用 tbx 工具箱 。更新： v1.5.0版本开始加入骑行方式支持。 使用说明参考 在 ArcGIS 内使用 tbx 工具箱 打开工具箱后，可看到如下界面。 主窗口 点击窗口下方的“显示帮助”(Show Help&gt;&gt;)按钮（上图），在点击每一输入项时可以显示详细介绍（下图）。 帮助窗口 各项输入的介绍请参考软件内的帮助信息。填入需要的输入项后点击确定开始运行。 运行截图： 运行截图1 上图是未输入激活码时的运行情况，关于激活码参见 获取激活码 运行截图2 运行结果：执行结果图： 驾车30分钟等时线（ArcMap添加的新图层默认为黑白配色，下图为加了底图和调节过图层显示颜色后的效果图） 运行结果 PS：如果需要网络地图作为底图，这里有一个免费的ArcGIS插件 https://github.com/xiaoqqchen/PcArcBruTile。如果以上链接打开有问题，也可 点此下载 。安装时需要解压后以管理员身份运行ArcBruTileSetup_setup_0.4.exe。该插件与本人没有任何关系。 获取激活码未输入过激活码时，可在任意机器上使用到2016年4月15日（该工具最早发布于2016年4月初）。之后使用需要输入与机器码对应的激活码，试用运行时，会在运行过程中显示出机器码。在Win7以上系统中，激活码可自动写入到用户文件夹，因此输入一次即可。 输入激活码时的截图 输入过激活码时的截图 该软件是与 城市数据派 的合作版本，城市数据派会员可联系数据派管理员获取激活码。非数据派会员可发邮件至i@xdc.at与我联系。获取激活码时请提供运行时显示的机器码。 常见问题1. 如果运行过程中，在创建完采样点shp之后，无法创建栅格文件。可能原因是 地理处理-环境-处理范围 不是“默认”，请修改后重试。2. 无法对采样点shp文件进行投影。可能原因是选择的投影坐标系不适合输入的地点，请修改后重试。3. 其他错误的话请检查输出文件路径内是否有空格、下划线等。 相关论文基于互联网地图服务的城市一日交流圈分析——以沪宁杭三市为例【中国知网】 引用格式参考：谢栋灿. 基于互联网地图服务的城市一日交流圈分析——以沪宁杭三市为例: 2016中国城市规划年会, 中国辽宁沈阳, 2016[C]. 使用该工具的公开研究成果，请注明以上引用，和/或附上本页面网址 http://i.xdc.at/2016/10/30/transportation-contour-line-tbx/ 。 更新v1.2.5 稳定版本发布v1.3.1 支持自定义采样空间边界v1.3.3 更新公交方式数据接口v1.4.1 测试加入多线程支持v1.5.0 添加骑行交通方式支持；支持自动选择最接近的投影坐标系 下载xdc交通等时线工具箱v1.3.3.tbxxdc交通等时线工具箱v1.4.1.tbx（多线程测试版）xdc交通等时线工具箱v1.5.0.tbx（骑行方式测试版）","tags":[{"name":"ArcGIS","slug":"ArcGIS","permalink":"https://i.xdc.at/tags/ArcGIS/"},{"name":"高德","slug":"高德","permalink":"https://i.xdc.at/tags/高德/"},{"name":"tbx","slug":"tbx","permalink":"https://i.xdc.at/tags/tbx/"},{"name":"工具箱","slug":"工具箱","permalink":"https://i.xdc.at/tags/工具箱/"},{"name":"交通等时线","slug":"交通等时线","permalink":"https://i.xdc.at/tags/交通等时线/"}]},{"title":"上海市公交线路简要分析","date":"2016-10-06T06:22:50.000Z","path":"2016/10/06/shanghai-busline-analysis/","text":"本文首发于微信公众号 远见farsightj，原文链接。 注：以下使用的数据主要是2015年12月抓取的上海市公交线路网数据，与最新抓取的数据相比，新的数据更加完善。 公共交通一直以来都是城市发展的重点，国务院也曾多次就发展城市公共交通下发指导意见。2016年2月24日，《上海市公共汽（电）车客运线路优化导则》编制完成，截至3月3日开始广泛的征询市民意见。那么，上海市民对市内公共交通的运营现状了解多少呢？我们下面将从公交基本服务情况、公交服务能力和区域公交联系三大方面对上海市的公交建设发展现状进行分析。 1. 线路基本服务情况公共汽车一般是城市中发展历史最久，覆盖面积最广的公共交通形式。公交站点分布与公交线路的布局与居民生活日常出行息息相关。城市发展的现阶段，公交作为一种公共资源在空间上的分布肯定是非均质的。那么，在上海市内哪些地区公交站点、公交线路的分布最为密集呢？于是我们计算了站点(计算时使用的数据中，如果同一站点停靠了多条公交线路，则每条线路都会有一个对应的点。下文涉及站点时与此相同)的点密度图与线路的线密度图(同一线路的往返方向为不同的两条线)。从以下两图可以看到，公交站点与公交线路主要集中在中心城区与郊区的副中心，与上海市的城镇体系结构和人口空间分布情况基本一致。 公交站点与公交线路密度 除了站点密度和线路密度之外，公交线路的运营长度也是评价公交服务水平的重要指标，一般以不超过15公里为宜。线路过长，车辆周转率下降，为保证效率需要投入更多的运营车辆而增加成本，否则发车间隔增加，乘车不便；而线路过短，则会导致居民出行换乘次数增加，同样会给乘客带来诸多不便。统计分析显示，上海市公交运营长度主要集中在15公里左右，有大量的运营长度超过15公里的公交；线路长路超过20公里后的公交数量急剧下降。这也和上海市建成区面积的扩张有一定的关系。 线路长度分布 公交线路在尽可能保证覆盖城市道路的同时，线路非直线系数（起点、终点间的路上实际距离与两点间直线距离的比值）也不宜过大，最后应该控制在1.5以下，过大则会导致居民出行距离和出行时间增加。经过分析发现，上海市一半以上线路的非直线系数超标，但不排除分析结果受到了部分环形线路干扰的情况。 起点终点连线 非直线系数分布 从运营时间来看，公交线路的运营时间主要集中在白天的8:00-18:00时间段，在凌晨1:00-4:00时间段运营车辆最少。公交运行一般在早上7:00时段正式开始，运行线路数在至7点-19点的时间段内一直维持在高水平。在夜间运营的车辆中，主要是从市中心开往郊区方向，徐泾镇方向有较多夜间行车。 逐时段运营线路 2. 服务面积与服务人口对于公交系统的评价，一个重要的指标是其服务范围。一般公交站点的服务半径在300至500米，是步行适宜的距离，据此计算公交站点的服务面积覆盖率可以评价公交线路的服务能力。就整个上海市而言，以300米来计算公交站点的服务范围，则服务面积共覆盖上海市建成区的56.40%，以500米计算服务范围，则覆盖建成区面积的78.15%，距离500米内90%的面积覆盖的目标还有很长的路要走。 服务面积 以上是从服务面积的角度分析覆盖率，那么，从服务人口数角度的分析结果会是怎样呢？以上海市第六次人口普查的常住人口密度作为服务人口的统计依据，计算后发现，300m和500m半径的服务人口分别占到了常住人口总数的74.95%和89.20% 。从服务人口角度计算的上海市公交服务能力更好。 服务人口 上文已提到，公交资源的空间分布是不均衡的。我们对于上海市不同的行政区的公交资源进行了比较分析。比较不同的行政区内公交站点数量发现，浦东新区、闵行区、松江区内公交站点的数量是所有行政区中最多的。然而在计算单位面积内的公交站点数量时，我们发现，黄浦区、静安区、虹口区等中心城区的单位面积的公交资源排在前列，中心城区公交站的密度仍远远大于郊区。 各区公交站点数量 比较不同行政区内的公交线路里程数，我们了发现相同的情况。公交线路总里程的比较上，郊区大于中心城区；但比较单位面积内的公交里程，中心城区则远远大于郊区。 各区公交里程 公共交通的建设上是中心城区占优，因此不同地区的公交服务情况也会不同。我们比较了各行政区内人均的公交站点数量和公交里程。在人均公交里程上，各个行政区的差别不大。但比较每个站点平均服务人口上，中心城区所面临的服务的压力要比郊区地区大得多。 每个车站平均服务人口 3. 公交线路空间联系公交线路串联起了上海市内不同的行政区和重要的地点。具体每个街道之间通过公交线路的联系程度有多强呢？我们设定，一条公交线路只要同时在两个街道有停靠，那就为这两个街道间的联系强度值+1，最终生成对应的街道联系矩阵。由下图可知，联系较强的区域主要由中心城区向外呈放射状分布，陆家嘴街道和徐家汇街道分别是浦东和浦西的公交联系核心，但浦东浦西之间的公交联系较弱。 街道间联系强度 街道间联系线路数量 以上就是我们初步的分析结果，欢迎各位大侠与我们交流讨论~ 本文编辑： xdc@farsightj.cn , zyp@farsightj.cn , tjl@farsightj.cn 欲了解更多数据与分析情况，欢迎关注公众号“远见”与我们联系。扫描下面的二维码识别关注。手机端微信外看到此文章，可在微信搜索“farsightj”添加我们的公众号。 远见公众号 也欢迎持续关注远见网站 http://farsightj.cn 。","tags":[{"name":"开放数据","slug":"开放数据","permalink":"https://i.xdc.at/tags/开放数据/"},{"name":"公交线路","slug":"公交线路","permalink":"https://i.xdc.at/tags/公交线路/"},{"name":"公交","slug":"公交","permalink":"https://i.xdc.at/tags/公交/"},{"name":"上海市","slug":"上海市","permalink":"https://i.xdc.at/tags/上海市/"},{"name":"数据分析","slug":"数据分析","permalink":"https://i.xdc.at/tags/数据分析/"}]},{"title":"全国公交线网数据","date":"2016-10-06T04:21:38.000Z","path":"2016/10/06/busline-data/","text":"本文首发于微信公众号 远见farsightj，原文链接。 数据概况新鲜出炉的全国公共交通（公交、地铁、部分长途线路）站点与线网数据，线路约8万条。 全国公共交通站点： 全国公共交通站点 全国公共交通线网： 全国公共交通线网 上海市公共交通线网，超精准线路哦： 上海市公共交通线网 市中心放大： 上海市中心区公共交通线网 属性包含运营时间、发车间隔、票价、是否空调车等。 欲了解更多数据与分析情况，欢迎关注公众号“远见”与我们联系。扫描下面的二维码识别关注。手机端微信外看到此文章，可在微信搜索“farsightj”添加我们的公众号。 远见公众号 也欢迎持续关注远见网站 http://farsightj.cn 。 在线可视化基于mapbox的全国公交线路在线可视化，点此查看","tags":[{"name":"开放数据","slug":"开放数据","permalink":"https://i.xdc.at/tags/开放数据/"},{"name":"数据介绍","slug":"数据介绍","permalink":"https://i.xdc.at/tags/数据介绍/"},{"name":"公交线路","slug":"公交线路","permalink":"https://i.xdc.at/tags/公交线路/"},{"name":"公交","slug":"公交","permalink":"https://i.xdc.at/tags/公交/"},{"name":"地铁","slug":"地铁","permalink":"https://i.xdc.at/tags/地铁/"}]},{"title":"全国POI数据","date":"2016-10-06T02:20:40.000Z","path":"2016/10/06/poi-data/","text":"本文首发于微信公众号 远见farsightj，原文链接。字段信息等更新在文末。 微信原文 新鲜出炉的2016全国POI，共约4500+万条。分类齐全，位置精准，字段完整。展示如下： 全国POI密度分布： 全国POI密度分布 全国黄焖鸡米饭分布： 全国黄焖鸡米饭分布 全国沙县小吃分布: 全国沙县小吃分布 全国公交站点分布： 全国公交站点分布 同济大学周边全部POI： 同济大学周边全部POI 结构化存储，任意筛选切分！各位项目或研究大侠！有需要请与我们公众号联系哦~ 欲了解更多数据与分析情况，欢迎关注公众号“远见”与我们联系。扫描下面的二维码识别关注。手机端微信外看到此文章，可在微信搜索“farsightj”添加我们的公众号。 远见公众号 也欢迎持续关注远见网站 http://farsightj.cn 。 补充信息数据字段信息： 数据字段信息 POI分类对照表可 点此下载 TIP:高德 API 在返回 POI 结果时，并非是完整数据，而是存在一定程度的缺失。部分权重较低的 POI，如 ATM 等，在大类搜索结果里缺失就较多。为了规避缺失，可采用更换不同关键词、更改搜索范围等方法交叉抓取，将得到的结果合并去重。但这样会带来较大的抓取工作量，目前已有的4500+万条数据已能满足大多数场景下的分析需求。（已更新至 5600 万数据量）如果需要某细分类的更完整数据，可发邮件至 i@xdc.at 定制抓取服务。 更新全国POI数据2016年11月更新全国POI数据2017年2月更新全国POI数据2017年6月更新","tags":[{"name":"开放数据","slug":"开放数据","permalink":"https://i.xdc.at/tags/开放数据/"},{"name":"数据介绍","slug":"数据介绍","permalink":"https://i.xdc.at/tags/数据介绍/"},{"name":"POI","slug":"POI","permalink":"https://i.xdc.at/tags/POI/"}]},{"title":"使用 SQL Server 存储空间要素","date":"2016-10-05T07:20:39.000Z","path":"2016/10/05/geometry-in-SQL-Server/","text":"写在前面 :为什么要在 SQL Server 内创建空间要素？该需求来自于千万级别POI数据的存储与可视化。存储部分使用 SQL Server 即可，并且筛选查询的效率也比较高。可视化方面用的比较多的是 ArcGIS , 分析起来也比较方便，但对于大批量数据的处理效率比较低。因此就希望能够把数据库的存储与查询能力，和 ArcGIS 的空间数据可视化与分析能力结合起来。经过一番搜索，得到了以下的解决方案。 1. 在 SQL Server 内创建空间要素在数据库内创建空间要素的方法来自于微软官方文档 创建、构造和查询几何图形实例，在 SQL Server 2014 上测试可用。此处以创建点要素为例: geometry::STPointFromText(&#39;POINT (x y)&#39;, SRID)其中 x, y 为坐标值。SRID为空间参考编号，可在 ArcGIS 内空间参考设置处找到不同坐标系的ID， WGS 1984 坐标系的 SRID 为 4326 。因此可用以下代码创建一个经纬度为121.15545, 31.65894的点。1select geometry::STPointFromText(&apos;POINT (121.15545 31.65894)&apos;, 4326) 2. 构造一个 ArcGIS 可直接连接的数据表要在 ArcGIS 内直接显示 SQL Server 数据表内的空间要素，则对数据表的结构有一定要求。以点要素为例，创建的表需要以int类型的OBJECTID字段作为主键，并有一个geometry数据类型的字段。示例代码：1234567891011121314151617181920/***** 创建包含空间数据的表 *****/USE [测试数据库]CREATE TABLE [测试数据表] ( [OBJECTID] [int] primary key not NULL, [id] [varchar](10) NULL, [name] [varchar](200) NULL, [lng] [float] NULL, [lat] [float] NULL, [形状] [geometry] not NULL)/***** 将数据插入表中 *****/insert into [测试数据表]SELECT ROW_NUMBER() over (order by [id]) as [OBJECTID] ,[id] ,[name] ,[lng] ,[lat] ,geometry::STPointFromText(concat(&apos;POINT (&apos;,convert(varchar, [lng], 128), &apos; &apos;, convert(varchar, [lat], 128), &apos;)&apos;), 4326 ) as [形状] FROM [原数据表] Tip :快速获得原数据表的数据结构代码，可对原数据表右键-编写表脚本为-CREATE 到-新查询编辑器窗口 3. 使用 ArcGIS 显示 SQL Server 内存储的数据ArcGIS 软件提供了丰富的数据源方式，其中就包括 SQL Server。 ArcMap 内，目录窗口，双击数据库连接-添加数据库连接。 在弹出的窗口内，数据库平台选择SQL Server，实例填写 SQL Server 服务器名（SQL Server 安装在本机的话，可填写localhost或本机计算机名），身份验证类型按需选择，默认为操作系统身份验证，然后在下拉列表内选择数据表所在数据库，确定即可。 在数据库连接下找到新添加的连接，双击打开，将包含空间数据的表拖到显示窗口内即可。如果数据量较大，计算范围时间过程，可选择使用空间参考范围跳过此步骤。 如果只需要显示部分的数据，可在图层的属性-定义查询内填入筛选查询语句。筛选操作由数据库后台完成，因此效率还可以接受。 本文来自 i.xdc.at/2016/10/05/geometry-in-SQL-Server/ Tip :如果想创建存储其他空间要素类型的数据表，如线要素的表，可在 ArcGIS 内将已有的线数据图层右键-数据-导出数据...，输出要素类的保存类型选择数据库要素类，将数据保存到数据库连接里的一张新表内，然后在 SQL Server 内查看这张表的结构，具体操作为对这张表右键-编写表脚本为-CREATE 到-新查询编辑器窗口 。 UPDATE: 2016-10-06为提高数据在 ArcGIS 内显示的效率，最好对数据表创建空间索引，参见 创建、修改和删除空间索引 。","tags":[{"name":"ArcGIS","slug":"ArcGIS","permalink":"https://i.xdc.at/tags/ArcGIS/"},{"name":"SQL Server","slug":"SQL-Server","permalink":"https://i.xdc.at/tags/SQL-Server/"}]},{"title":"Markdown 入门","date":"2016-10-04T09:04:12.000Z","path":"2016/10/04/markdown-test/","text":"标题 标题直接以1个或多个#开头，表示不同等级。 一级标题二级标题三级标题四级标题五级标题六级标题 有序列表直接数字加句号加内容即可。无序列表以-、+或者*开头 有序列表1 有序列表2 1234如果不想产生列表，则需要用\\转义，如1986\\. What a great season.以下字符均可加 \\ 进行转义来显示为普通符号:\\ ` * _ &#123;&#125; [] () # + - . ! 无序列表1测试多行 无序列表2 无序列表* 无序列表* 引用的内容以&gt;开头 这里是引用多行引用 测试插入图片 ![图片替代文字](http://i.xdc.at/assets/avatar/avatar.png &quot;图片标题&quot;) avatar 测试插入连接[链接文字](http://i.xdc.at/ &quot;链接标题&quot;)主页链接标题可省略 粗体 **这里是粗体**斜体 *这里是斜体* 这里是粗体这里是斜体 表格 |表头1|表头2|表头3| |----|:----:|----:| |值1|值2|值3| |靠左|居中|靠右| –表头1– –表头2– –表头3– 值1 值2 值3 靠左 居中 靠右 代码区块缩进4个空格或者一个制表符即可产生代码区块(上下要有空行)或前后使用三个 ` 。 import time print time.ctime() 12import timeprint time.ctime() 行内代码，使用两个`括起来。测试 import time 。 分割线三个-、_或* 教程来自Markdown——入门指南","tags":[{"name":"Markdown","slug":"Markdown","permalink":"https://i.xdc.at/tags/Markdown/"}]},{"title":"Hello World","date":"2016-10-04T06:22:20.000Z","path":"2016/10/04/first-post/","text":"这是一篇使用Hexo生成的博文。 最初看到GitHub + Hexo的建站教程是在知乎专栏 GitHub + Hexo (1)：在 OS X 下建立你的第一个博客——史上最靠谱教程 ，随后找到相应的 Windows 下教程 用 GitHub + Hexo 建立你的第一个博客 。 相对Jekyll来看，Hexo似乎上手容易的多，加上已注册 GitHub 并有独立域名，因此很快就完成了部署测试。主题选择了简洁风格的 yilia，使用起来效果不错。 Markdown 的编辑使用了 Haroopad，参照着 Markdown——入门指南 写下此文。 感谢提供开源工具、平台以及相关教程的公司与个人，是你们让互联网更加自由和美好。 UPDATE: 2016年10月20日11:10:29将托管服务从 GitHub 迁移到 Coding.net UPDATE: 2016年10月27日00:19:22将主题更换为 indigo","tags":[{"name":"Hexo","slug":"Hexo","permalink":"https://i.xdc.at/tags/Hexo/"},{"name":"GitHub","slug":"GitHub","permalink":"https://i.xdc.at/tags/GitHub/"},{"name":"Markdown","slug":"Markdown","permalink":"https://i.xdc.at/tags/Markdown/"},{"name":"Coding.net","slug":"Coding-net","permalink":"https://i.xdc.at/tags/Coding-net/"}]}]